import{_ as e,c as r,o as a,a3 as t}from"./chunks/framework.Cv3JQ2Vj.js";const h=JSON.parse('{"title":"解决C# Form SQL注入的问题","description":"","frontmatter":{"title":"解决C# Form SQL注入的问题","date":"2017-06-15T00:00:00.000Z"},"headers":[],"relativePath":"posts/jie-jue-csharpformsql-zhu-ru-de-wen-ti.md","filePath":"posts/jie-jue-csharpformsql-zhu-ru-de-wen-ti.md"}'),o={name:"posts/jie-jue-csharpformsql-zhu-ru-de-wen-ti.md"},d=t('<h1 id="解决c-form-sql注入的问题" tabindex="-1">解决C# Form SQL注入的问题 <a class="header-anchor" href="#解决c-form-sql注入的问题" aria-label="Permalink to &quot;解决C# Form SQL注入的问题&quot;">​</a></h1><p>解决这个问题需要调用下SqlCommand.Parameters</p><p>比如下面简单写的一个登陆判断deom</p><p>如果还是看不懂可以下载deom打断点一步步看，同时注释也更加详细 下载地址：<a href="http://download.zhaoshun.org/WinForm_Sql_ZhuRu.rar" title="本地下载" target="_blank" rel="noreferrer">本地下载</a></p><p>DataTable dt = new DataTable(); string sqlconn = &quot;server=.;uid=sa;pwd=123;database=shunzi&quot;; SqlConnection conn = new SqlConnection(sqlconn); string DmSrt = &quot;select * from Users where id=@Uid and pwd=@Pwd&quot;; SqlCommand cmd = new SqlCommand(DmSrt, conn); //第一种写法 <a href="//cmd.Parameters.Add" target="_blank" rel="noreferrer">//cmd.Parameters.Add</a>(&quot;@Uid&quot;, SqlDbType.NVarChar); <a href="//cmd.Parameters.Add" target="_blank" rel="noreferrer">//cmd.Parameters.Add</a>(&quot;@Pwd&quot;, SqlDbType.NVarChar); <a href="//cmd.Parameters" target="_blank" rel="noreferrer">//cmd.Parameters</a>[0].Value = UserId_TextBox.Text; <a href="//cmd.Parameters" target="_blank" rel="noreferrer">//cmd.Parameters</a>[1].Value = UserPwd_TextBox.Text; //第一种写法中，赋值的另一种写法 <a href="//cmd.Parameters" target="_blank" rel="noreferrer">//cmd.Parameters</a>[&quot;@Uid&quot;].Value = UserId_TextBox.Text; <a href="//cmd.Parameters" target="_blank" rel="noreferrer">//cmd.Parameters</a>[&quot;@Pwd&quot;].Value = UserPwd_TextBox.Text; //第二种写法 <a href="//cmd.Parameters.Add" target="_blank" rel="noreferrer">//cmd.Parameters.Add</a>((new SqlParameter(&quot;@Uid&quot;, UserId_TextBox.Text))); <a href="//cmd.Parameters.Add" target="_blank" rel="noreferrer">//cmd.Parameters.Add</a>((new SqlParameter(&quot;@Pwd&quot;, UserPwd_TextBox.Text))); //第三种写法 <a href="//cmd.Parameters.AddRange" target="_blank" rel="noreferrer">//cmd.Parameters.AddRange</a>( // new SqlParameter[]{ // new SqlParameter(&quot;@Uid&quot;,SqlDbType.VarChar){Value=UserId_TextBox.Text}, // new SqlParameter(&quot;@Pwd&quot;,SqlDbType.VarChar){Value=UserPwd_TextBox.Text}, // }); SqlDataAdapter sda = new SqlDataAdapter(cmd); sda.Fill(dt); if (dt.Rows.Count &gt; 0) { MessageBox.Show(&quot;登录成功&quot;); } else { MessageBox.Show(&quot;账号或密码错误&quot;); }</p>',5),s=[d];function n(m,l,u,c,q,_){return a(),r("div",null,s)}const P=e(o,[["render",n]]);export{h as __pageData,P as default};
