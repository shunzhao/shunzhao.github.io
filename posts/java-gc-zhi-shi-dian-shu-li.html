<!DOCTYPE html>
<html lang="zh-Hans" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaGC知识点梳理 | 顺子的网络日记</title>
    <meta name="description" content="输入,处理,输出">
    <meta name="generator" content="VitePress v1.2.3">
    <link rel="preload stylesheet" href="/assets/style.D7BqhbGp.css" as="style">
    
    <script type="module" src="/assets/app.CEa22I3o.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.Cv3JQ2Vj.js">
    <link rel="modulepreload" href="/assets/chunks/theme.CWDI9Y8y.js">
    <link rel="modulepreload" href="/assets/posts_java-gc-zhi-shi-dian-shu-li.md.kpF-3y2A.lean.js">
    <link rel="icon" href="/favicon.ico">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c8291ffa></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c8291ffa> Skip to content </a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar top" data-v-7ad780c2 data-v-844edcde><div class="wrapper" data-v-844edcde><div class="container" data-v-844edcde><div class="title" data-v-844edcde><div class="VPNavBarTitle" data-v-844edcde data-v-0ad69264><a class="title" href="/" data-v-0ad69264><!--[--><!--]--><!----><span data-v-0ad69264>顺子的网络日记</span><!--[--><!--]--></a></div></div><div class="content" data-v-844edcde><div class="content-body" data-v-844edcde><!--[--><!--]--><div class="VPNavBarSearch search" data-v-844edcde><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-844edcde data-v-f732b5d0><span id="main-nav-aria-label" class="visually-hidden" data-v-f732b5d0>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/memoirs.html" tabindex="0" data-v-f732b5d0 data-v-08fbf4b6><!--[--><span data-v-08fbf4b6>回忆</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-844edcde data-v-283b26e9><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-283b26e9 data-v-7df97737 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-7df97737></span><span class="vpi-moon moon" data-v-7df97737></span><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-844edcde data-v-8e87c032 data-v-af5898d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-af5898d3><span class="vpi-more-horizontal icon" data-v-af5898d3></span></button><div class="menu" data-v-af5898d3><div class="VPMenu" data-v-af5898d3 data-v-e42ed9b3><!----><!--[--><!--[--><!----><div class="group" data-v-8e87c032><div class="item appearance" data-v-8e87c032><p class="label" data-v-8e87c032>Appearance</p><div class="appearance-action" data-v-8e87c032><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-8e87c032 data-v-7df97737 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-7df97737></span><span class="vpi-moon moon" data-v-7df97737></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-844edcde data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-844edcde><div class="divider-line" data-v-844edcde></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-883964e0><button data-v-883964e0>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>On this page</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _posts_java-gc-zhi-shi-dian-shu-li" data-v-e6f2a212><div><h1 id="javagc知识点梳理" tabindex="-1">JavaGC知识点梳理 <a class="header-anchor" href="#javagc知识点梳理" aria-label="Permalink to &quot;JavaGC知识点梳理&quot;">​</a></h1><p>Java的一大优势就是内存的自动回收功能，虽然这方面 Java 默认已经做的很好了，但没办法，已经卷到要人人皆知的地步，人人调优JVM的地步了。</p><h2 id="什么是垃圾" tabindex="-1">什么是垃圾？ <a class="header-anchor" href="#什么是垃圾" aria-label="Permalink to &quot;什么是垃圾？&quot;">​</a></h2><p>这个其实很容易想的到，不再使用的东西就是垃圾，以面向对象的角度来说就是程序运行时，所产生的所有对象，更详细一点就是对象实例、对象的模板Class以及各种常量字面量等等。</p><p>当然说的容易，做起来难，需要考虑的点很多。</p><h2 id="如何找到垃圾" tabindex="-1">如何找到垃圾？ <a class="header-anchor" href="#如何找到垃圾" aria-label="Permalink to &quot;如何找到垃圾？&quot;">​</a></h2><p>知道了回收哪些对象后，下一个问题是如何去判断哪些数据是没有被使用的，目前主流的方法有两种：1. 引用计数算法， 2. 可达性分析算法</p><h5 id="引用技术算法" tabindex="-1">引用技术算法 <a class="header-anchor" href="#引用技术算法" aria-label="Permalink to &quot;引用技术算法&quot;">​</a></h5><p>为每一个对象都创建一个计数器，当该对象被引用时该计数器加一，断开引用时减一，最后在垃圾回收时，如果某对象的计数器为0，则表示该对象可以被回收。 优点：实现相对简单 缺点：如果两个对象互相引用的情况下，就会产生计数器为1，但是其实该对象未被外部使用的情况，类似于死锁中环路等待的情况。 举个例子：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object target;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // MyObject的引用计数器+1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            MyObject a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // MyObject的引用计数器+1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            MyObject b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // MyObject的引用计数器+1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            a.target </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // MyObject的引用计数器+1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            b.target </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // MyObject的引用计数器-1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // MyObject的引用计数器-1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p>在这种情况下，就会导致该对象无法被回收，慢慢的内存可用空间越来越来少，最终导致内存泄露的情况，因此目前Java并未采用这种算法，而是采用可达性分析算法。</p><h5 id="可达性分析算法" tabindex="-1">可达性分析算法 <a class="header-anchor" href="#可达性分析算法" aria-label="Permalink to &quot;可达性分析算法&quot;">​</a></h5><p>可达性分析算法，其思想是，选定一批特定的变量，把这些变量作为<strong>根节点（GCRoots）</strong>，从这些根节点开始往下查找所有的引用，最终会构成一个引用链（也可以理解为最后的数据结构就像一个图一样），不在这个引用链的对象就可以被回收掉。</p><p>那么现在的问题在于哪些变量可以被选作为 GCRoots ，此时不妨想想，再实际的编码中会在哪些地方创建对象。</p><ol><li>类的属性成员（全局变量或常量或静态属性）</li><li>类的方法里面（局部变量）</li></ol><p>从底层规范一点来说就是：</p><ol><li>虚拟机栈中栈帧里面的本地变量表</li><li>本地方法栈中的 JNI （也就是native方法）中引用的对象</li><li>方法区中静态属性引用的对象</li><li>方法区中常量应用的对象</li></ol><h2 id="哪些垃圾是需要主动回收的" tabindex="-1">哪些垃圾是需要主动回收的？ <a class="header-anchor" href="#哪些垃圾是需要主动回收的" aria-label="Permalink to &quot;哪些垃圾是需要主动回收的？&quot;">​</a></h2><p>并不是所有的垃圾都需要主动的回收，以 JVM 运行时数据区域来划分，包括了 方法区（非堆、1.7的实现方式为永久代，1.8的实现方式为元空间）、运行时常量池（1.7之前是方法区的一部分，1.7之后被移除）、虚拟机栈、本地方法栈、程序计数器PC、Java堆。</p><p>其中虚拟机栈、本地方法栈、程序计数器都是线程私有，这部分空间属于创建线程时分配、线程结束即释放，被释放的空间，无需清理，下一个新的线程使用的时候会直接<strong>覆盖</strong>原数据。 而 Java堆、方法区、运行时常量池则是属于线程共享，绝大对数对象都会在这几块区域被创建，其中 堆 主要存放着 new 的对象 方法区主要存放着 Class 类信息 运行时常量池则存放编译期生成的各种字面量和符号引用等数据 它们之间的关系又会呈现 多个相同类型的对象 is 一个Class类 has 多个常量</p><h2 id="如何高效回收垃圾" tabindex="-1">如何高效回收垃圾？ <a class="header-anchor" href="#如何高效回收垃圾" aria-label="Permalink to &quot;如何高效回收垃圾？&quot;">​</a></h2><h3 id="垃圾收集算法" tabindex="-1">垃圾收集算法 <a class="header-anchor" href="#垃圾收集算法" aria-label="Permalink to &quot;垃圾收集算法&quot;">​</a></h3><ol><li><p>标记-清理 这个算法最简单，直接将被引用的对象标记一下，然后清理就可以了，但是缺点在于容易导致内存碎片过多，明明还有空间，但是无法分配的情况。 这里的标记，<strong>既可以标记被引用的对象，也可以标记未被引用的对象</strong>，实际情况可能根据虚拟机算法实现者的不同而不同。 可以这么理解，如果内存中，存活的对象比较少，需要清理的对象多，那么标记时，只标记存活的效率就要高很多了，而有时候则相反。 因此如果严谨一点</p></li><li><p>复制 为了改进标记-清理算法的缺点，于是复制算法就出现了，其思想是：将内存一分为二，每次只用其中的一块，当要回收对象是，就将复活的对象复制到另外一块内存中，这样就可以解决内存碎片化的问题。 缺点是将内存的利用率降低了，每次只用了50%的内存空间，后续也有人改进过该算法，即不将内存按1：1的比例来划分，而是根据实际需求来划分。</p></li><li><p>标记-整理 为了改进复制算法导致的内存利用率低的缺点，标记-整理算法的思想则是会标记所有被引用的对象，然后把对象按照顺序一个一个从头排列，最后清理掉其他的空间。</p></li><li><p>分代收集 这个算法本质上并没有什么改进，更多的是集成了上述所有的算法，并且根据每个算法的优点结合实际的情况来进行垃圾收集。</p><p>在这个算法中，将堆划分为了新生代和老年代，为什么要这么划分呢？其更多的根据对象的生存周期具有可预见性，大多数对象都是在方法中被创建，方法结束后就该对象也大概率不会再使用了。 因此可以说大部分对象都是&quot;<strong>朝生夕死</strong>&quot;，基于这种特征，我们可以将对象的创建划分到新生代中，如果一个对象生存周期达到一定时间时，再则将其移动到老年代中，这样就保证了新生代都是短命鬼，老年代都是老不死。 我们再来看下各区域适合的算法</p><ul><li>新生代的特点：朝生夕死，对于这类对象，可以使用复制算法，因为大多数情况下真正要复制的对象会很少，也不会导致内存碎片化，但缺点也存在，即内存使用率低，于是可以采用改进后的复制算法： 将新生代再次划分为：<strong>一个Eden区、一个 To Survivor 区和一个 From Survivor区</strong>，其空间比例为 <strong>8：1：1</strong>，每次只使用<strong>一个 Eden 区和一个 Survivor 区</strong>，在GC时，把<strong>存活</strong>的对象<strong>复制</strong>到<strong>另外一个 Survivor</strong> 中， 这样就只浪费了 <strong>10%</strong> 的空间。 还有两个细节问题随即而来： 1. <strong>如果在极端情况下：Eden的对象都没死，那么Survivor区又装不下的情况该怎么处理呢？</strong> 这个时候就需要借用老年代的空间了，即这部分对象直接移动到老年代中 2. 新生代里面的对象需要经历多长时间会被移动到老年代中？ 我们可以为每一个对象设置一个 age 计数器，每当该对象被垃圾回收时后还存活时，就将该计数器加1，达到一定阈值后就转移到老年代中，目前 hotspot 虚拟机默认情况下在对象的age达到15岁时，则会移动。</li><li>老年代的特点：具有长期生存的趋势，对于这类对象，既可以采用标记清理，也可以采用标记整理，虽说在这类比较稳定的对象，被清楚的可能性很小，但更多情况下还是会采用标记整理算法，这个根据具体的收集器不同而不同。</li></ul></li></ol><h3 id="对象引用" tabindex="-1">对象引用 <a class="header-anchor" href="#对象引用" aria-label="Permalink to &quot;对象引用&quot;">​</a></h3><p>在讲完了垃圾收集算法后，其实还有很多非常细节的问题： 第一：当对象被移动后（复制算法、标记-整理算法都需要移动对象），那么对象的地址肯定会被改变，在这种情况下，如何保证引用到正确的对象呢？ 第二：如何快速找到引用变量，难不成需要将所有的变量都遍历一遍，然后再判断该对象是一个引用类型还是说是一个基本类型，那这样效率也太慢了。</p><p>先来解决第一个问题：</p><ol><li>直接引用 直接引用很好理解，就是在本地变量表中，直接指向该对象在队中的地址就可以了，缺点就是在该对象的地址变化时，其本地表量表中所指向的地址也跟着需要变化。 假设我有99个变量都引用了该对象，那么这99个变量所指向的地址都需要改变，优点就是只需要找一次就可以得到对象的真实地址。</li><li>句柄引用 句柄则是在堆中额外再划分一块区域叫做句柄池，该区域专门用来指向实际的对象地址，然后再本地变量表中再指向句柄池中的地址，这样当对象的地址变化时，只需要改变句柄池中的地址就可以了， 外部所有变量都不需要改变，还是以99个变量都引用了该对象为例，那么这次只需要修改一次就可以了，优点就是直接引用的缺点，缺点是需要找两次。 按照C语言的指针来解释话，直接引用就是一级指针，句柄引用则是二级指针（指针的指针） 目前的虚拟机采用的是<strong>直接引用</strong> 再来解决第二个问题： <ol><li>如何判断该对象是一个引用类型还是说是一个基本类型？ 目前的主流的虚拟机都是采用的<strong>准确式GC</strong>，即虚拟机有能力去区分某一个变量是基本数据还是引用类型(好像是废话)，更严谨一点就是虚拟机有能力去一个内存中存储的是指针还是普通的数据， 除了准确式GC还有<strong>保守式GC</strong>，在保守式GC中，虚拟机无法分辨内存中存储的式指针还是普通的数据，因此，虚拟机为了保守期间是不敢乱改存储的数据的，假设把一个 int类型的数据 0000002，给作为引用类型来读取，那就乱套了。 所以<strong>保守式GC适合句柄引用，准确式GC适合直接引用</strong>。</li><li>如何快读找到引用变量呢？ 首先要明确一点：遍历所有线程堆栈是一个无法避免的问题，但既然虚拟机能判断一个数据是指针还是非指针，那么干脆就将遍历到的引用类型用某个容器存储起来，这样在GC时直接遍历该容器就可以节省大量时间了。（这里不得不感概，计算机中无非就是各种<strong>空间换时间</strong>和<strong>时间换空间</strong>的核心思想）。 例如在 hotspot虚拟机中，就是采用一组叫做 OopMap（ordinary object pointer） 的数据结构来存储引用类型，随之而来的问题是，何时生成 OopMap（生成 OopMap 的代码是虚拟机自动的注入的）？要知道在程序运行中，引用可能随时在变化，这一点在后面会给出解答。</li></ol></li></ol><h3 id="引用的分类" tabindex="-1">引用的分类 <a class="header-anchor" href="#引用的分类" aria-label="Permalink to &quot;引用的分类&quot;">​</a></h3><p>本来这一段应该放到下一章节，但是想了想在这里写了算了。</p><p>到目前为止，对于对象的引用来说似乎过于简单，一个对象要么被引用了，要么就是没有被引用，假设我想要用一个对象来做缓存，当内存充足时，该缓存一直存在，当内存不充足时，那么该缓存可以被丢弃掉。 以目前还做不到，但缓存又是一个非常实用的场景，像操作系统中的L1，L2，L3缓存、内存页的LRU置换算法，都是在内存满时，将未被使用的数据给丢弃掉。 因此 Java 扩展了引用的类型，将引用分为了：强引用、软引用、弱引用、虚引用。</p><ol><li><p>强引用 被强引用指向的对象，即时内存满了该对象也不会被清理。</p></li><li><p>软引用 被软引用指向的对象，会在内存满时被清理。</p></li><li><p>弱引用 被弱引用指向的对象，将在下一次GC时被清理，即该对象只能存活到下一次GC之前。</p></li><li><p>虚引用 被弱引用指向的对象，就像没有任何引用一样，在任何时候都可能被垃圾回收器回收。</p></li></ol><p>可以使用实际的代码进行测试：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> test1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 设置VM：-Xmx11M -Xmn11M -Xms11M</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;总堆：&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Runtime.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRuntime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">totalMemory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;剩余堆：&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Runtime.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRuntime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">freeMemory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 强引用</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String u </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;123123&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 触发自动GC</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        byte</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] buffer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> byte</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;剩余堆：&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Runtime.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRuntime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">freeMemory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(u);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 触发手动GC</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(u);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 输出结果：</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 总堆：11534336Byte</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 剩余堆：1383576Byte</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 剩余堆：1541304Byte</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 123123</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         * 123123 经历了两次 GC 后也并未被回收；</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> test1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 设置VM：-Xmx11M -Xmn11M -Xms11M</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;总堆：&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Runtime.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRuntime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">totalMemory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;剩余堆：&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Runtime.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRuntime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">freeMemory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        SoftReference&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; softReference </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SoftReference&lt;&gt;(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;SoftReference&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(softReference.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        byte</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] buffer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> byte</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1536</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(softReference.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p><img src="http://images.zhaoshun.org/static/images/2022/07/ruan_2022-07-05_09-18-37.png" alt="ruan_2022-07-05_09-18-37.png" title="ruan_2022-07-05_09-18-37.png"></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> test1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 设置VM：-Xmx11M -Xmn11M -Xms11M</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;总堆：&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Runtime.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRuntime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">totalMemory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;剩余堆：&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Runtime.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRuntime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">freeMemory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        WeakReference&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; stringWeakReference </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> WeakReference&lt;&gt;(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;WeakReference&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(stringWeakReference.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(stringWeakReference.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p><img src="http://images.zhaoshun.org/static/images/2022/07/ruo_2022-07-05_09-18-37.png" alt="ruo_2022-07-05_09-18-37.png" title="ruo_2022-07-05_09-18-37.png"></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Test</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> test1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 设置VM：-Xmx11M -Xmn11M -Xms11M</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;总堆：&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Runtime.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRuntime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">totalMemory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;剩余堆：&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Runtime.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRuntime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">freeMemory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ReferenceQueue 这个类的作用是，当对象被 gc 后会被放入到此队列中，这样就可以通知线程某某对象已经被回收了。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ReferenceQueue&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; stringReferenceQueue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ReferenceQueue&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        PhantomReference&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; phantomReference </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PhantomReference&lt;&gt;(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;PhantomReference&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, stringReferenceQueue);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(phantomReference.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(stringReferenceQueue);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(phantomReference.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(stringReferenceQueue);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p><img src="http://images.zhaoshun.org/static/images/2022/07/xu_2022-07-05_09-37-46.png" alt="xu_2022-07-05_09-37-46.png" title="xu_2022-07-05_09-37-46.png"></p><h2 id="什么时候开始收集" tabindex="-1">什么时候开始收集？ <a class="header-anchor" href="#什么时候开始收集" aria-label="Permalink to &quot;什么时候开始收集？&quot;">​</a></h2><h3 id="stw-stop-the-world" tabindex="-1">STW（stop the world） <a class="header-anchor" href="#stw-stop-the-world" aria-label="Permalink to &quot;STW（stop the world）&quot;">​</a></h3><p>在学习了前面所有的知识后，似乎万事俱备就差动手实现了，但是写着写着就突然发现，诶，在寻找垃圾(未被使用的引用)时，<strong>程序是运行中的，引用是还在变化中</strong>，换句话说就是可能<strong>刚刚清理完的地方又会产生了新的垃圾</strong>，就像这样：</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> test11</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 开始扫描 OOPMap，发现 a 是强引用，无需清理</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Object a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 结果扫描完 a 引用之后，a 就被置为 null 了，意味着 a 要等到下一次 GC 时才会被清理。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p>这种情况下该怎么办？ 就算再扫描一遍，那也没有任何意义，似乎唯一的方法就是<strong>暂停程序的运行</strong>，只有这样才可以避免引用变化，以达到准确的收集垃圾，就像老妈打扫卫生的时候，你还在产生垃圾，那么结果就是垃圾和你只能存在一个。 于是乎 Sun 给这种方式取了一个非常霸气的名称：<strong>Stop The World</strong>，当然这时<strong>暂停的是所有用户线程</strong>，而不是<strong>系统的GC线程</strong>，没人会蠢到把自己也给暂停。</p><p>那随之又带来了一个新的问题，用户线程被停止了，肯定是会影响实际的运行效率的，特别是一些对响应时间要求非常严格的应用，比如 Web 应用，用户刚点击一个按钮，此时STW，时间短还可能无感知，时间过长那就不是 GC 而是 GG 了。 但不幸的是目前虚拟机还无法完全避免 STW 只能不断的争取缩短该时间。</p><h3 id="safepoint" tabindex="-1">SafePoint <a class="header-anchor" href="#safepoint" aria-label="Permalink to &quot;SafePoint&quot;">​</a></h3><p>前面讲过，为了提高查找引用的效率，我们会生成 OopMap ，又为了提高 OopMap 的准确性，会在生成 OopMap 时进行 STW，现在要为了<strong>高效</strong>的生成 OopMap，又将会引进 SafePoint，它又解决了什么问题呢？先来看前面提到的生成 OopMap 的方式：遍历变量如果是一个指针我们就生成or更新 OopMap，很简单粗暴，但是我们为<strong>每一条指令都生成or更新OopMap</strong>，（在这里需要有一个预备知识，生成 OopMap 是虚拟机在你写的代码中，插入一条指令：类似于&quot;test %eax,0x160100&quot;，可以想象为动态代理中的切片一样） 那这样就会浪费太多的空间，还会影响效率，要避免这种事情的发生，又需要搬出计算机的核心思想之一的<strong>时间换空间</strong>了，我们可以有意的让线程在<strong>某一种特定的位置下</strong>再进行 GC（OopMap）换句话说就是不让用户程序在任意位置都进行 GC，像 TCP 发送报文数据时，为了提高性能，可能同样会将多个数据包合并成一个大的包发送。</p><p>而这些特定的位置，如果以单条指令来插入肯定不行，而以执行多条指令来插入就得考虑一下怎样<strong>避免程序长时间的运行而不进入safepoint</strong>。</p><p><strong>如何确保GC时所有线程都到达 SafePoint ？</strong> 通常两种有方式：</p><ol><li><p>抢占式 抢占式是指，立即中断所有的线程，然后判断该线程是否处于 safepoint 状态中，如果该线程不处于，则恢复该线程，让线程跑到 safepoint 后再中断。 优点：无需线程主动进行配合，而是有虚拟机来推进</p></li><li><p>主动式 主动式是指在内存中设置一个信号，每个线程在执行一条指令后，就去判断该信号是否被置为1，如果是，则中断自己。 这在 JVM 中又是怎么实现的呢？这里就不得不说 JVM 的狡猾之处，其为了避免<strong>轮询信号</strong>导致的性能问题（CPU Busy Waiting），采用了操作系统中的强大功能——<strong>中断</strong>（说到这里学习过操作系统的同学瞬间就明白了，<strong>CPU每次执行完一条指令，不也会去判断中断信号是否被置为1么，好的设计永远都是相同的</strong>。），于是乎 JVM 在前面说的特定地方插入指令 test %eax,0x160100，然后在 GC 时将 0x160100 这一页内存设置为不可读的状态，这样当指令执行到这里的时候就会触发中断错误(非法访问内存)，然后 JVM 再在自己注册的中断处理子例程中去挂起该线程，这样做的好处是什么呢？有一个回答是：为了避免memory barrier，不过就不知道其说法是否正确了。</p></li></ol><h3 id="saferegion" tabindex="-1">SafeRegion <a class="header-anchor" href="#saferegion" aria-label="Permalink to &quot;SafeRegion&quot;">​</a></h3><p>Region可以认为是Point的一个补充，前面说过Point是让<strong>运行中</strong>的线程去做相关的操作，但是实际情况是还有一些不在运行中的线程，例如 Thread.Sleep(333) 或 Blocked 中的线程，这样的线程可能就没办法响应这些操作了， 但是对于这些线程仔细想想就会发现，它都已经处于暂停的状态中，引用在这期间肯定是不会发生变化的，只是需要防止其在 GC 的过程中醒来而已，所以这类线程在进入到 Sleep 或 Blocked 状态时就会标识自己己经进入了Safe Region，在 GC 时就会跳过这些线程，等到这些线程醒过来时，需要判断现在是否完成了 GC，如果没有，则必须等待收到可以安全离开 Safe Region 的信号为止。</p><h2 id="对象死亡的过程" tabindex="-1">对象死亡的过程 <a class="header-anchor" href="#对象死亡的过程" aria-label="Permalink to &quot;对象死亡的过程&quot;">​</a></h2><p>到现在再来看看实际对象死亡的过程：</p><ol><li>当一个对象不在引用链时，会被第一次标记。</li><li>将标记的对象，继续判断其是否需要执行 <strong>finalize</strong> 这个方法，判断条件为：其 finalize 是否被重写了 或者该 finalize 是否已经被执行过了</li><li>如果一个对象需要执行 finalize 方式后，该对象将会被放置到一个 F-Queue 队列中等待一个 JVM 的线程去遍历执行，但是其执行并不承诺一定完成，这时因为避免某一个对象 finalize 失败而导致的整个队列崩溃。</li><li>剩下的对象才会被真正的判死刑。</li></ol><p>因此我们可以发现，一个对象其实是可以在 finalize 中实现自我复活的，但这个复活机会只有一次（因为 finalize 只会被调用一次），但并不建议这样做。 就像是一个犯人，在被真正最终判决之前，还有翻案的机会。</p><div class="language-JAVA vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">JAVA</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MyObject object1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> isAlive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;没想到吧，我还活着&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    protected</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> finalize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Throwable {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">finalize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        object1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> InterruptedException {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        object1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        object1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (object1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            object1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isAlive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;我已经死了&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        object1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (object1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            object1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isAlive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;我已经死了&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><img src="http://images.zhaoshun.org/static/images/2022/07/Snipaste_2022-07-06_14-56-55.png" alt="Snipaste_2022-07-06_14-56-55.png" title="Snipaste_2022-07-06_14-56-55.png"></p><h2 id="垃圾收集器" tabindex="-1">垃圾收集器 <a class="header-anchor" href="#垃圾收集器" aria-label="Permalink to &quot;垃圾收集器&quot;">​</a></h2><p>垃圾收集器是实现了各种垃圾收集算法的软件:</p><table tabindex="0"><thead><tr><th style="text-align:center;">收集器</th><th style="text-align:center;">作用区域</th><th style="text-align:center;">采用算法</th><th style="text-align:center;">运行方式</th><th style="text-align:center;">适用场景</th></tr></thead><tbody><tr><td style="text-align:center;">Serial New</td><td style="text-align:center;">新生代</td><td style="text-align:center;">复制</td><td style="text-align:center;">单线程</td><td style="text-align:center;">在单核CPU的情况下，性能较高</td></tr><tr><td style="text-align:center;">ParNew</td><td style="text-align:center;">新生代</td><td style="text-align:center;">复制</td><td style="text-align:center;">多线程</td><td style="text-align:center;">Serial New的多线程版本，适合多核CPU的情况下</td></tr><tr><td style="text-align:center;">Parallel Scanvenge</td><td style="text-align:center;">新生代</td><td style="text-align:center;">复制</td><td style="text-align:center;">单线程</td><td style="text-align:center;">多线程收集，多核环境下效率要比serial高</td></tr><tr><td style="text-align:center;">Serial Old</td><td style="text-align:center;">老年代</td><td style="text-align:center;">标记-整理</td><td style="text-align:center;">多线程</td><td style="text-align:center;">在单核CPU的情况下，性能较高</td></tr><tr><td style="text-align:center;">CMS</td><td style="text-align:center;">老年代</td><td style="text-align:center;">标记清除法+标记整理法</td><td style="text-align:center;">多线程</td><td style="text-align:center;">以提高系统的吞吐量为主</td></tr><tr><td style="text-align:center;">Parallel Old</td><td style="text-align:center;">老年代</td><td style="text-align:center;">标记-整理</td><td style="text-align:center;">多线程</td><td style="text-align:center;">和ParNew一样，但是无法和CMS一起工作</td></tr><tr><td style="text-align:center;">G1</td><td style="text-align:center;">通用</td><td style="text-align:center;">复制</td><td style="text-align:center;">多线程</td><td style="text-align:center;">以降低STW的时间为主</td></tr></tbody></table><h2 id="gc日志的查看" tabindex="-1">GC日志的查看 <a class="header-anchor" href="#gc日志的查看" aria-label="Permalink to &quot;GC日志的查看&quot;">​</a></h2><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Jdk1.8 hotspot虚拟机 VM 参数：-Xmx30M -Xms30M -XX:+PrintGCDetails</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 参数解释： -Xmx 最大堆大小 -Xms 最小堆大小 --XX打印 GC 细节</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _1MB </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1024</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] args) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        byte</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] buffer1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> byte</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[_1MB </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        byte</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] buffer2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> byte</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[_1MB </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        byte</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] buffer3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> byte</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[_1MB </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    * 打印日志</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    * [GC (System.gc()) [PSYoungGen: 8180K-&gt;824K(9216K)] 8180K-&gt;6976K(29696K), 0.0032798 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    * [Full GC (System.gc()) [PSYoungGen: 824K-&gt;0K(9216K)] [ParOldGen: 6152K-&gt;6766K(20480K)] 6976K-&gt;6766K(29696K), [Metaspace: 3274K-&gt;3274K(1056768K)], 0.0045226 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    * Heap</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    *  PSYoungGen      total 9216K, used 166K [0x00000000ff600000, 0x0000000100000000, 0x0000000100000000)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    *   eden space 8192K, 2% used [0x00000000ff600000,0x00000000ff629820,0x00000000ffe00000)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    *   from space 1024K, 0% used [0x00000000ffe00000,0x00000000ffe00000,0x00000000fff00000)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    *   to   space 1024K, 0% used [0x00000000fff00000,0x00000000fff00000,0x0000000100000000)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    *  ParOldGen       total 20480K, used 6766K [0x00000000fe200000, 0x00000000ff600000, 0x00000000ff600000)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    *   object space 20480K, 33% used [0x00000000fe200000,0x00000000fe89b930,0x00000000ff600000)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    *  Metaspace       used 3286K, capacity 4496K, committed 4864K, reserved 1056768K</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    *   class space    used 357K, capacity 388K, committed 512K, reserved 1048576K</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    */</span></span></code></pre></div><p>打印日志的相关解释：</p><div class="language-Text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[GC (System.gc()) [PSYoungGen: 8180K-&gt;824K(9216K)] 8180K-&gt;6976K(29696K), 0.0032798 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]</span></span></code></pre></div><p>第一行中的 GC 代表部分 GC 可能是只收集了新生代，后面的 System.gc() 则代表此次 GC 的调用方式，如果是空间不足的话 这里会显示 <strong>Allocation Failure</strong>，然后[]中括号括起来的部分是此次GC清理的区域，可以看到是PSYoungGen， 代表此次清理的是 Gen 区，8180K-&gt;824K(9216K) 则是代表<strong>清理前</strong>是8180K，<strong>清理后</strong>是824K，总共9216K，中括号之外的则是代表 总内存清理前大小-&gt;总内存清理后大小(总内存大小)，再之后的 0.0032798 secs 则是代表GC花费的时间</p><div class="language-Text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[Full GC (System.gc()) [PSYoungGen: 824K-&gt;0K(9216K)] [ParOldGen: 6152K-&gt;6766K(20480K)] 6976K-&gt;6766K(29696K), [Metaspace: 3274K-&gt;3274K(1056768K)], 0.0045226 secs] [Times: user=0.00 sys=0.00, real=0.00 secs]</span></span></code></pre></div><p>第一行中的 Full GC 代表该 GC 收集了所有的区域（包括新生代、老年代、元空间），其他的和上面讲的一样，就不多在叙述，但是需要注意的是，Full GC 一定会导致 STW。</p><p>PSYoungGen 代表新生代用的是 Px 收集器 ParOldGen 代表老年代用的是 下 收集器 当我把最大最小堆设置为 30M 后可以发现，默认情况下新生代与老年代的<strong>空间比例</strong>是 <strong>1:2</strong> 所以可以看到 新生代 是 10M，而老年代则是 20M，当然，我这里明明显示的是 9216K=9M，我却说的10M，这不是睁着眼睛说瞎话么，这前面讲过，这里再复习一下 新生代中又被划分为 eden 区和两个 survivor 区， 默认这三个区的比例是 8:1:1 ，每次是会使用 eden 和其中一个 survivor 区，所以这里显示的才是 9M。</p></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-5941af80><!--[--><!--]--><!----><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter" data-v-d8b57b2d data-v-566314d4><div class="container" data-v-566314d4><p class="message" data-v-566314d4>Copyright © 2016-2024 ShunZi | Powered by Vitepress</p><!----></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"readme.md\":\"oVPCAVJ_\",\"posts_ji-da-jian-minecraft-fu-wu-duan.md\":\"RymhRUD2\",\"posts_ji-yi-ci-jdbc-ban-ben-yin-qi-de-bug.md\":\"EwY0kYGJ\",\"posts_ji-yi-ge-bao-hu-shi-li-de-ruan-jian.md\":\"DdCCiEQa\",\"posts_ji-yi-ge-you-qu-de-zheng-gu-hao-you-fang-fa.md\":\"Cteje5hS\",\"posts_ji-yi-ge-zi-ji-shi-yong-de-shu-biao-zhi-zhen.md\":\"CS4_Mn77\",\"posts_ji-zhong-zhuang-web-huan-jing-suo-yu-dao-de-wen-ti.md\":\"DK7B_Wrh\",\"posts_jie-jue-csharpformsql-zhu-ru-de-wen-ti.md\":\"CrLCJPRP\",\"posts_jin-cheng-de-bing-fa-kong-zhi.md\":\"CmyZuL-f\",\"posts_jin-cheng.md\":\"xzCmOwaa\",\"posts_js-shi-xian-wang-ye-jin-zhi-you-jian.md\":\"Bn3OeGT2\",\"posts_json-xu-lie-hua-shi-bi-mian-chu-xian-_ref-yin-yong.md\":\"BSQHSFsW\",\"posts_mo-kuai-hua-she-ji.md\":\"BCRiwbju\",\"posts_mysql-storage-ip.md\":\"CLrSw_wO\",\"posts_net-web-config-jia-mi.md\":\"LOOQ6jrF\",\"posts_net-web-config-pei-zhi-shu-ju-ku.md\":\"C89Nj4qt\",\"posts_office-professional-plus-2016-yong-jiu-ji-huo-mi-yao.md\":\"Dw6mb6IM\",\"posts_oracle-chuang-jian-shi-tu-jue-se-fu-yu-quan-xian.md\":\"BHEv-bPZ\",\"posts_csharp-cong-http-huo-qu-tu-pian.md\":\"Co_Mvx7v\",\"posts_csharp-lei.md\":\"B-2H56cB\",\"posts_minecraft-fu-wu-duan-linux.md\":\"Cfp8MhEX\",\"posts_cpcl-xie-yi-shou-ce.md\":\"CaWe3Vfr\",\"posts_kai-shi-xue-che-le.md\":\"WtefBQPE\",\"posts_jdbc-oracle-fan-hui-bu-liao-zi-zeng-zhu-jian.md\":\"D8l9XPBQ\",\"posts_java-gc-zhi-shi-dian-shu-li.md\":\"kpF-3y2A\",\"posts_linux-ru-men-bi-ji.md\":\"BTdUuy_S\",\"posts_cookie-de-que-dian.md\":\"BF3TkNua\",\"posts_csharp-bo-fang-sheng-yin-de-dai-ma.md\":\"CSRZNRrP\",\"posts_microsoft-visual-studio-2017-2015-ji-huo-ma.md\":\"BQ3cvhz3\",\"memoirs.md\":\"C5h8GCDq\",\"posts_adobe-tong-yong-po-jie-wen-jian.md\":\"BH7sUQN5\",\"posts_csharp-he-dotnet-lian-jie-mysql.md\":\"DRXbIHug\",\"posts_ke-yi-shun-li-tong-guo.md\":\"NLPCXebx\",\"posts_oracle-chuang-jian-tong-yi-ci.md\":\"DZAz_t3y\",\"posts_csharp-du-qu-access-shu-ju-ku.md\":\"DBp2LGFy\",\"posts_chu-ci-shou-dong-da-jian-apache-yu-dao-de-wen-ti-ji-jie-jue-fang-fa.md\":\"Sdtk8-OP\",\"posts_mian-fei-ling-de-zhi-fu-bao-song-de-shou-kuan-shen-qi.md\":\"QouPxtJe\",\"posts_csharp-ge-shi-hua-zi-fu-chuan.md\":\"C2BLHyHc\",\"posts_android-xi-tong-jia-gou.md\":\"GZ_F0HoV\",\"posts_oracle-ji-chu.md\":\"CyuTO6wk\",\"posts_oracle-zi-zeng-id-de-shi-xian.md\":\"-oXIfYyv\",\"posts_php-fa-song-you-jian.md\":\"C_SWVcaH\",\"posts_ping-mu-lu-zhi-ruan-jian.md\":\"Coqg9cUR\",\"posts_python-bi-ji.md\":\"CReQp4fG\",\"posts_python-jiang-zi-ji-xie-de-bao-fang-dao-quan-ju.md\":\"oL7NTAjg\",\"posts_python-lian-jie-oracle.md\":\"DLPvro8n\",\"posts_ruan-die-tong-ultraiso-zhu-ce-ma--dan-wen-jian-ban--lv-se-ban.md\":\"Dxl8qlCl\",\"posts_san-ceng-jia-gou-yu-mvc-mo-shi.md\":\"Br4KYuUn\",\"posts_sharding-sphere-fen-ku-fen-biao-pei-zhi.md\":\"CNlN7JXD\",\"posts_she-zhi-kong-jian-tabcontrol1-zhong-de-tabpage1-de-yin-cang-xian-shi.md\":\"C9EWBvnM\",\"posts_shell-ru-men-bi-ji.md\":\"B_hmdo8r\",\"posts_shen-me-shi-web-ying-yong.md\":\"BwHB3dGd\",\"posts_shen-me-shi-wen-jian.md\":\"BtQErcq7\",\"posts_shi-xian-dai-ji-cun-qi-neng-zi-dong-lei-jia-de-alu-ji-chu-dian-lu.md\":\"BeFRRs09\",\"posts_shi-xian-er-jin-zhi-jia-jian-fa-alu-ji-chu-dian-lu.md\":\"DQi9PEiW\",\"posts_shi-yong-css-wan-cheng-yuan-su-ju-zhong-de-fang-fa.md\":\"DY31ufJs\",\"posts_shuai-bu-diao-de-bug-yi-sheng.md\":\"CvECk20T\",\"posts_shun-xu-fen-zhi-xun-huan-hui-bian-jie-gou.md\":\"DDh6BgLN\",\"posts_sqlserver-bi-ji.md\":\"B2WbZHyX\",\"posts_sqlserver-fen-ye-yu-ju.md\":\"Dj73Cm4-\",\"posts_sqlserver-jie-shu-le-kai-shi-xin-pian-zhang-csharpwinform.md\":\"ECVAeRjp\",\"posts_sqlserver2012-xu-lie-hao-zhu-ce-ma.md\":\"CKIiG-ck\",\"posts_bai-du-tie-ba-zi-dong-ding-tie-js-dai-ma.md\":\"BpqgLbpa\",\"posts_tcp-de-san-ci-wo-shou-he-si-ji-hui-shou.md\":\"B8nythwx\",\"posts_bi-ye-shi-pin-ae-mu-ban.md\":\"CR3Cl5Ih\",\"posts_tiao-guo-shou-ji-hao-yan-zheng-deng-lu-bai-du-fang-fa.md\":\"DGtvPJ2w\",\"posts_tomcat-pei-zhi-wen-jian-qian-jie-xi.md\":\"DwCIozKA\",\"posts_tu-pian-wu-sun-fang-da-gong-ju-photozoom-yi-he-xie.md\":\"CWwwcvKd\",\"posts_vip-shi-pin-jie-xi.md\":\"BIspi1xY\",\"posts_visual-studio-ultimate-2012-ji-huo-xu-lie-hao.md\":\"f85A4ig7\",\"posts_vmware-12-pro-yong-jiu-ji-huo-mi-yao.md\":\"bPzS7YNp\",\"posts_web-zhong-jian-ren-gong.md\":\"5zh62XNo\",\"posts_wei-shen-me-yao-xue-xi-bian-cheng.md\":\"BM5udw4Y\",\"posts_wei-windows-zheng-ming.md\":\"C193HPQQ\",\"posts_windows-yu-office-ji-huo-bei-fen-yu-huan-yuan.md\":\"DfhItAmf\",\"posts_winformsql-gou-zao-han-shu-chuan-zhi-shi-xian-zeng-shan-gai-cha.md\":\"mAUT1EgP\",\"posts_winrar5-40-zhong-wen-wu-guang-gao-po-jie-ban.md\":\"Be-ihcOg\",\"posts_xiang-mu-jie-shu-le.md\":\"Ae29sGEl\",\"posts_yong-photoshop-qu-tu-pian-shui-yin-de-6-ge-xiao-ji-qiao.md\":\"DJg4txaG\",\"posts_ying-zi-wei-shi-zhong-shen-zhu-ce-ma.md\":\"CprJh1DK\",\"posts_bian-cheng-gao-ji-si-xiang.md\":\"D2Mvofy0\",\"posts_bing-dian-wen-ku-xia-zai-qi-lv-se-qu-guang-gao-ban.md\":\"gr9LRJiH\",\"posts_bo-ke-cong-win-yi-dao-le-linux.md\":\"CtsPi_p9\",\"posts_gao-ge-le-wei-xin-ding-yue-hao.md\":\"UmtsY2qc\",\"posts_csharp-huo-qu-biao-dang-zhong-de-shou-xing-shou-lie-de-zhi.md\":\"CZY4u5P5\",\"posts_csharp-lian-jie-sqlserver-shi-xian-zeng-shan-gai-cha.md\":\"BrX-1qP5\",\"posts_csharp-lian-jie-sqlserver.md\":\"CSLN1ik_\",\"posts_csharp-mao-pao-pai-xu-he-xuan-ze-pai-xu.md\":\"3g25bJ57\",\"posts_csharp-san-ceng-jia-gou.md\":\"DYKFM_il\",\"posts_csharp-san-ji-lian-dong.md\":\"DevFkPnh\",\"posts_csharp-shi-xian-deng-lu-chuang-kou-dai-ma.md\":\"BZ3qK4T3\",\"posts_csharp-sui-ji-ma-sheng-cheng.md\":\"ByQUaz05\",\"posts_csharp-xian-ding-yong-hu-ming-bi-xu-wei-zi-mu.md\":\"B-dkZaLL\",\"posts_csharp-xiang-fang-fa-chuan-di-can-shu-ref-yu-out.md\":\"BeKX3Snn\",\"posts_csharpbase64-jia-mi-fang-fa.md\":\"CTpOyayF\",\"posts_csharpdowhile-xun-huan.md\":\"BQP65Jtj\",\"posts_csharpwinform-zhong-chuang-ti-yu-chuang-ti-jian-chuan-zhi.md\":\"wtIMiFbJ\",\"posts_cun-chu-qi-xi-tong.md\":\"BsUtw_1H\",\"index.md\":\"B4PQaRuq\",\"posts_da-jian-lamp-huan-jing.md\":\"CzP9sP5X\",\"posts_da-jian-lnmp-huan-jing.md\":\"BIYKjYqm\",\"posts_di-yi-ci-yong-linux-xi-tong-da-jian-web-fu-wu-qi.md\":\"mJqgS1S0\",\"posts_dian-nao-zhuang-ji-bi-bei-ruan-jian-shen-qi-ka-ying-gong-ju-xiang.md\":\"CDV2iDt5\",\"posts_javascript-dong-tai-tian-jia-css-yang-shi-de-ji-zhong-fang-fa.md\":\"BcjZrDI7\",\"posts_csharp-shi-xian-md5-jia-mi-jian-dan-fa-zhi-yi.md\":\"DSaS2RkL\",\"posts_fan-si.md\":\"DYCMXkXs\",\"posts_fei-xun-di-san-fang-gu-jian.md\":\"BHmIflS0\",\"posts_fei-xun-fuckyou.md\":\"BMuURtim\",\"posts_fei-xun-shua-breed.md\":\"rPyLTFW9\",\"posts_fu-zhi-bu-ke-neng-textify.md\":\"B0Wl3ugu\",\"posts_ge-lei-ying-jian-shi-bie-jian-ce-gong-ju.md\":\"Arvy6-1D\",\"posts_geng-huan-cheng-le-zi-ji-kai-fa-de-bo-ke.md\":\"C9ul0_Oz\",\"posts_guan-bi-win10-kai-ji-mi-ma.md\":\"DEe79xxd\",\"posts_guan-yu-lian-tong-xiao-yuan-wang-duo-bo.md\":\"Bd6h2atf\",\"posts_guan-yu-win10-zhang-hao-bei-ting-yong-jie-jue-fang-fa.md\":\"DyCBxCW7\",\"posts_h5-shi-xian-jian-dan-de-tuo-zhuai-shang-chuan.md\":\"DZqUAJpe\",\"posts_he-xi-zai-ci-cheng-gong-bei-an.md\":\"BoqySszH\",\"posts_hello-world.md\":\"CrchFYav\",\"posts_hong-hei-shu.md\":\"cnh5eAA3\",\"posts_html-tu-xiang-de-ding-wei-shi-li.md\":\"e4ABXvfj\",\"posts_http-zhong-get-yu-post-de-qu-bie.md\":\"DYNT5Swa\",\"posts_hui-bian-zhong-if-yu-switch-de-xiao-lv-qu-bie.md\":\"CFSAGxYL\",\"posts_huo-qu-bi-ying-mei-ri-tu-pian.md\":\"C_WkGggJ\",\"posts_java-dan-yuan-ce-shi.md\":\"Bsnj0Tqy\",\"posts_adobecs6-xi-lie-guan-fang-xia-zai-di-zhi.md\":\"Doy3HVJa\",\"posts_spingboot-da-jian-websocket.md\":\"CTyPDJRz\",\"posts_spring-zi-tiao-yong-shi-wu-shi-xiao.md\":\"BvWVN29q\",\"posts_jing-cheng-diao-du-suan-fa.md\":\"C_ypYkoz\",\"posts_ke-mu-er-zhong-yu-guo-le.md\":\"BW5t7p_L\",\"posts_csharpadonet5-da-dui-xiang.md\":\"BJ8FR3_C\",\"posts_sql-jiang-tu-pian-cun-fang-zai-shu-ju-ku-zhong.md\":\"DPXNj6Wd\",\"posts_dotnet-wen-jian-shang-chuan.md\":\"CKmSVq70\",\"posts_elasticsearch-ru-men-bi-ji.md\":\"wfazWQKO\",\"posts_ni-bo-lan-biao-da-shi.md\":\"DetyxTLg\",\"posts_gao-xiao-bang-gua-ke-jiao-ben.md\":\"DTx-aIjW\",\"posts_java-bian-xie-jian-yi-webserver-bing-zhi-chi-php.md\":\"CrY2Zf_I\",\"posts_you-qu-de-bian-sheng-ruan-jian.md\":\"CG7J5avN\",\"posts_you-yi-ci-bigdecimal-shi-yong-bu-dang-de-zao-cheng-de-wen-ti.md\":\"Cd5sZqV5\",\"posts_you-yi-ci-jue-de-dang-cheng-xu-yuan-de-hao-chu.md\":\"CEA7iuz1\",\"posts_zai-yi-ci-de-huan-jing-ce-shi.md\":\"DXSLwlQP\",\"posts_zhe-teng-bo-ke-zhu-ti.md\":\"oCSU2Idf\",\"posts_zhe-teng-zhu-ti.md\":\"YvQNVp5H\",\"posts_zhong-yu-yi-ge-huang-guan-le.md\":\"C-ZaxZG6\",\"posts_zi-chan-guan-li.md\":\"DZPujS5s\",\"posts_xun-you-jia-su-qi-po-jie-ban.md\":\"LAY9yNUH\",\"posts_yi-nian-jiu-zhe-me-guo-qu-le.md\":\"vVtL_De-\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-Hans\",\"dir\":\"ltr\",\"title\":\"顺子的网络日记\",\"description\":\"输入,处理,输出\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"回忆\",\"link\":\"/memoirs\"}],\"search\":{\"provider\":\"local\"},\"footer\":{\"message\":\"Copyright © 2016-2024 ShunZi | Powered by Vitepress\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>